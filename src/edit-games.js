const _0x2ab971=_0x7ccf;(function(_0x53b8c6,_0x5c7736){const _0xc195a7=_0x7ccf,_0x49f104=_0x53b8c6();while(!![]){try{const _0x1ca6ed=-parseInt(_0xc195a7(0xcf))/0x1+-parseInt(_0xc195a7(0x79))/0x2+parseInt(_0xc195a7(0xde))/0x3*(parseInt(_0xc195a7(0x75))/0x4)+parseInt(_0xc195a7(0x81))/0x5*(parseInt(_0xc195a7(0xe8))/0x6)+parseInt(_0xc195a7(0xb6))/0x7*(-parseInt(_0xc195a7(0xe1))/0x8)+-parseInt(_0xc195a7(0xf3))/0x9*(parseInt(_0xc195a7(0x73))/0xa)+parseInt(_0xc195a7(0xca))/0xb;if(_0x1ca6ed===_0x5c7736)break;else _0x49f104['push'](_0x49f104['shift']());}catch(_0x4e8dd9){_0x49f104['push'](_0x49f104['shift']());}}}(_0x38b1,0x38c16));const GAS_URL=CONST_GAS_URL;let gameId='',counts={'ball':0x0,'strike':0x0,'out':0x0},runners={'base1':![],'base2':![],'base3':![]},score={'top':{},'bottom':{}},totalScore={'top':0x0,'bottom':0x0},currentInning=0x1,isBottomInning=![],isGameEnded=![],historyStack=[],isPushing=![],syncTimer=null,totalInnings=0x9,lastPushTime=0x0;document[_0x2ab971(0x77)](_0x2ab971(0x9e),()=>{const _0x192958=_0x2ab971;fetchLeagues();const _0x515061=document[_0x192958(0xc7)]('gen-id-btn');_0x515061&&_0x515061['addEventListener']('click',()=>{const _0x379204=_0x192958,_0x18ef44=document['getElementById']('select-league')[_0x379204(0x6a)]||'G',_0x26e0b5=new Date()[_0x379204(0x7c)]()[_0x379204(0xf1)](0x2,0xa)[_0x379204(0x87)](/-/g,''),_0x3b2690=Math[_0x379204(0xdb)]()['toString'](0x24)[_0x379204(0xd8)](0x2,0x5)[_0x379204(0xbc)]();document['getElementById'](_0x379204(0x70))[_0x379204(0x6a)]=_0x18ef44+'-'+_0x26e0b5+'-'+_0x3b2690;});const _0xdb85ec=document[_0x192958(0xc7)](_0x192958(0xdf));_0xdb85ec&&_0xdb85ec[_0x192958(0x77)]('click',handleStartGame);const _0x125f9e=(_0x51e058,_0x1bf714)=>{const _0x9e002e=_0x192958,_0x309196=document[_0x9e002e(0xc7)](_0x51e058);if(_0x309196)_0x309196[_0x9e002e(0x77)](_0x9e002e(0xc0),_0x1bf714);};_0x125f9e(_0x192958(0xa4),()=>addCount(_0x192958(0xcb))),_0x125f9e(_0x192958(0xab),()=>addCount('ball')),_0x125f9e(_0x192958(0xb7),()=>addCount(_0x192958(0xb5))),_0x125f9e(_0x192958(0xbb),()=>addCount(_0x192958(0xb5))),_0x125f9e('single-hit-btn',()=>recordPlay(_0x192958(0xd3))),_0x125f9e(_0x192958(0xa9),()=>recordPlay(_0x192958(0xed))),_0x125f9e(_0x192958(0xa5),()=>recordPlay(_0x192958(0xe3))),_0x125f9e(_0x192958(0x6c),()=>recordPlay(_0x192958(0xd0))),_0x125f9e(_0x192958(0xbd),undo),_0x125f9e(_0x192958(0x74),endGame);});async function handleStartGame(_0x25016e){const _0x363ea3=_0x2ab971;_0x25016e['preventDefault']();const _0x5d2ea7=document[_0x363ea3(0xc7)](_0x363ea3(0x70)),_0x5810ce=document[_0x363ea3(0xc7)](_0x363ea3(0x6d));gameId=_0x5d2ea7[_0x363ea3(0x6a)][_0x363ea3(0xc3)]();const _0x3b2738=_0x5810ce['value'],_0x543301=document[_0x363ea3(0xc7)](_0x363ea3(0xd7))[_0x363ea3(0x6a)]||'先攻',_0x2bb764=document[_0x363ea3(0xc7)](_0x363ea3(0xb2))[_0x363ea3(0x6a)]||'後攻';if(!_0x3b2738||!gameId){alert(_0x363ea3(0xe4));return;}totalInnings=parseInt(document[_0x363ea3(0xc7)]('input-innings')[_0x363ea3(0x6a)])||0x9,initScoreboard(_0x543301,_0x2bb764,totalInnings),document[_0x363ea3(0xc7)]('display-game-id')[_0x363ea3(0xa8)]='ID:\x20'+gameId,document[_0x363ea3(0xc7)](_0x363ea3(0x93))[_0x363ea3(0x9d)][_0x363ea3(0xe0)]('hidden'),document[_0x363ea3(0xc7)](_0x363ea3(0x6b))[_0x363ea3(0x9d)][_0x363ea3(0x86)](_0x363ea3(0xe2)),showStatus('試合を登録中...'),isPushing=!![];try{await syncPush(null,{'inning':0x1,'isBottom':![],'team':_0x543301,'leagueName':_0x5810ce[_0x363ea3(0x9a)][0x0][_0x363ea3(0xf2)]}),showStatus(_0x363ea3(0x9f));if(syncTimer)clearInterval(syncTimer);syncTimer=setInterval(syncPull,0x2710);}catch(_0x3ad4fe){console['error'](_0x3ad4fe),showStatus(_0x363ea3(0x85));}finally{isPushing=![];}}async function syncPush(_0x1ffe7c=null,_0x31527f=null){const _0x342a7e=_0x2ab971;if(!gameId)return;const _0xc660aa={'gameId':gameId,'leagueName':document[_0x342a7e(0xc7)](_0x342a7e(0x6d))['selectedOptions'][0x0][_0x342a7e(0xf2)],'topTeamName':document[_0x342a7e(0xc7)](_0x342a7e(0xd7))[_0x342a7e(0xa8)],'bottomTeamName':document['getElementById'](_0x342a7e(0xb2))[_0x342a7e(0xa8)],'totalInnings':totalInnings,'score':score,'totalScore':totalScore,'counts':counts,'runners':runners,'currentInning':currentInning,'isBottomInning':isBottomInning,'isGameEnded':isGameEnded,'updatedAt':new Date()['toISOString']()},_0x420691={'gameId':gameId,'state':_0xc660aa,'action':_0x1ffe7c,'logData':_0x31527f};try{await postToGAS(GAS_URL,_0x420691),showStatus(_0x342a7e(0x9f)),lastPushTime=Date[_0x342a7e(0xf5)]();}catch(_0x5c54bc){showStatus(_0x342a7e(0x8e));}finally{isPushing=![];}}async function fetchLeagues(){const _0x224743=_0x2ab971;try{const _0x4a9d4a=await fetch(GAS_URL+_0x224743(0x94)),_0x1b44b9=await _0x4a9d4a[_0x224743(0xaf)](),_0x118469=document[_0x224743(0xc7)]('select-league');_0x118469[_0x224743(0xbf)][0x0]['text']=_0x224743(0x8d),_0x1b44b9[_0x224743(0xd6)](_0x24cb69=>{const _0x290135=_0x224743,_0x6488e8=document[_0x290135(0x82)]('option');_0x6488e8[_0x290135(0x6a)]=_0x24cb69['id'],_0x6488e8[_0x290135(0xa8)]=_0x24cb69[_0x290135(0x96)],_0x118469[_0x290135(0x7a)](_0x6488e8);});}catch(_0x3b654d){console['error'](_0x224743(0xb0),_0x3b654d);}}function initScoreboard(_0x2f2cd5,_0x5d9d2c,_0x210ad0){updateScoreboardUI();}function showStatus(_0x11fdcb){const _0x474178=_0x2ab971,_0x1c8c7d=document[_0x474178(0xc7)](_0x474178(0xdc));if(_0x1c8c7d)_0x1c8c7d[_0x474178(0xa8)]=_0x11fdcb;}function _0x38b1(){const _0x2e75a9=['deleteCell','試合データが見つかりません','input-game-id','試合終了','&_=','8270yinWoK','end-game-btn','125756DKCOny','base3','addEventListener','isGameEnded','703412ADAGAP','appendChild','?mode=getGamesByLeague&leagueId=','toISOString','エラー:\x20スコアボードの行が見つかりません。','同期済み','アウト','parse','10ygPbdn','createElement','score','?mode=getGameDetail&gameId=','登録エラー（再試行してください）','remove','replace','試合が終了しました。この画面は閲覧専用になります。','stringify','style','totalInnings','<option\x20value=\x22\x22>--\x20編集する試合を選択\x20--</option>','--リーグを選択--','同期失敗','pop','runners','データを復元しました。編集を再開します。','active','setup-screen','?mode=getLeagues','counts','name','試合終了です。','?gameId=','Pull\x20Error:','selectedOptions','データの送信に失敗しました。通信環境を確認してください。','isBottomInning','classList','DOMContentLoaded','同期完了','runner','pointer','header-row','base2','strike-btn','triple-hit-btn','<option\x20value=\x22\x22>(試合がありません)</option>','<option\x20value=\x22\x22>読み込みに失敗しました</option>','textContent','double-hit-btn','not-allowed','ball-btn','bottomTeamName','取り消し操作','ball','json','League\x20Fetch\x20Error:','state','bottom-team-name','ID:\x20','innerHTML','out','329Dsklzc','fly-out-btn','topTeamName','1.0','編集する試合を選択してください','ground-out-btn','toUpperCase','undo-btn','currentInning','options','click','push','cells','trim','existing-game-form','length','total-score-top','getElementById','disabled','button:not(#undo-btn)','6119773xIOKlY','strike','score-row-bottom','active-cell','game-over','113506ThaQpF','ホームラン','toggle','log','シングルヒット','mode-selection','string','forEach','top-team-name','substring','error','totalScore','random','sync-status','score-row-top','6JBlgdU','start-btn','add','28192SmiyBP','hidden','トリプルヒット','リーグを選択し、試合IDを入力してください。','top','insertBefore','option','918342jUdDOC','0.5','base1','bottom','new-game-form','ダブルヒット','試合一覧の取得失敗:','<option\x20value=\x22\x22>試合を読み込み中...</option>','max','slice','text','675qRbPqB','select-existing-game','now','display-game-id','試合を終了しますか？','value','main-app','hr-btn','select-league'];_0x38b1=function(){return _0x2e75a9;};return _0x38b1();}async function syncPull(){const _0x5535af=_0x2ab971;if(isPushing||!gameId)return;if(Date[_0x5535af(0xf5)]()-lastPushTime<0x3a98){console[_0x5535af(0xd2)]('自分の操作直後のため、外部更新をスキップします');return;}try{const _0x5523af=await fetch(GAS_URL+_0x5535af(0x98)+gameId+_0x5535af(0x72)+Date[_0x5535af(0xf5)]()),_0x50d6bd=await _0x5523af[_0x5535af(0xaf)]();_0x50d6bd&&!_0x50d6bd[_0x5535af(0xd9)]&&(applyState(_0x50d6bd),showStatus(_0x5535af(0x7e)));}catch(_0x20d6fd){console['error'](_0x5535af(0x99),_0x20d6fd),showStatus('受信エラー');}}function applyState(_0x32c520){const _0x1f3990=_0x2ab971;counts=_0x32c520[_0x1f3990(0x95)],runners=_0x32c520[_0x1f3990(0x90)],score=_0x32c520['score'],currentInning=_0x32c520['currentInning'],isBottomInning=_0x32c520[_0x1f3990(0x9c)],isGameEnded=_0x32c520['isGameEnded'],updateCountDisplay(),updateDiamondDisplay(),updateScoreboardUI();}async function addCount(_0x39c9ac,_0x59c4db=![]){const _0x22f687=_0x2ab971;if(isGameEnded||isPushing)return;saveHistory();if(_0x39c9ac===_0x22f687(0xcb))counts[_0x22f687(0xcb)]++,counts[_0x22f687(0xcb)]>=0x3&&(counts[_0x22f687(0xcb)]=0x0,counts['ball']=0x0,addCount(_0x22f687(0xb5),!![]));else{if(_0x39c9ac===_0x22f687(0xae)){counts[_0x22f687(0xae)]++;if(counts[_0x22f687(0xae)]>=0x4){recordPlay('四球');return;}}else{if(_0x39c9ac===_0x22f687(0xb5)){counts[_0x22f687(0xb5)]++;_0x59c4db?await recordPlay('三振'):await recordPlay(counts['out']+_0x22f687(0x7f));counts[_0x22f687(0xb5)]>=0x3&&handleInningChange();return;}}}updateCountDisplay(),updateScoreboardUI();}async function recordPlay(_0x3e7f67){const _0x33169e=_0x2ab971;if(isGameEnded||isPushing)return;setControlsDisabled(!![]),historyStack=[];try{if(_0x3e7f67===_0x33169e(0xd0)){let _0x2cbad5=0x1;if(runners[_0x33169e(0xea)])_0x2cbad5++;if(runners['base2'])_0x2cbad5++;if(runners[_0x33169e(0x76)])_0x2cbad5++;addScore(_0x2cbad5),runners={'base1':![],'base2':![],'base3':![]};}else{if(_0x3e7f67===_0x33169e(0xd3)){if(runners[_0x33169e(0x76)])addScore(0x1);runners[_0x33169e(0x76)]=runners[_0x33169e(0xa3)],runners['base2']=runners['base1'],runners[_0x33169e(0xea)]=!![];}else{if(_0x3e7f67==='ダブルヒット'){if(runners[_0x33169e(0x76)])addScore(0x1);if(runners[_0x33169e(0xa3)])addScore(0x1);runners[_0x33169e(0x76)]=runners[_0x33169e(0xea)],runners[_0x33169e(0xa3)]=!![],runners[_0x33169e(0xea)]=![];}else{if(_0x3e7f67==='トリプルヒット'){let _0x2357ed=0x0;if(runners[_0x33169e(0xea)])_0x2357ed++;if(runners[_0x33169e(0xa3)])_0x2357ed++;if(runners[_0x33169e(0x76)])_0x2357ed++;addScore(_0x2357ed),runners={'base1':![],'base2':![],'base3':!![]};}else{if(_0x3e7f67==='四球'){if(runners[_0x33169e(0xea)]&&runners['base2']&&runners[_0x33169e(0x76)])addScore(0x1);else{if(runners[_0x33169e(0xea)]&&runners[_0x33169e(0xa3)])runners[_0x33169e(0x76)]=!![];else runners[_0x33169e(0xea)]&&(runners[_0x33169e(0xa3)]=!![]);}runners[_0x33169e(0xea)]=!![];}}}}}counts[_0x33169e(0xcb)]=0x0,counts[_0x33169e(0xae)]=0x0,updateCountDisplay(),updateDiamondDisplay(),updateScoreboardUI(),await syncPush(_0x3e7f67,getLogSnapshot());}catch(_0x3b20f0){console[_0x33169e(0xd9)]('送信エラー:',_0x3b20f0),alert(_0x33169e(0x9b));}finally{setControlsDisabled(![]);}}function handleInningChange(){const _0x340e2e=_0x2ab971;counts={'ball':0x0,'strike':0x0,'out':0x0},runners={'base1':![],'base2':![],'base3':![]},isBottomInning?(score[_0x340e2e(0xeb)][currentInning]===undefined&&(score[_0x340e2e(0xeb)][currentInning]=0x0),currentInning>=totalInnings?(isGameEnded=!![],syncPush('試合終了',getLogSnapshot()),alert(_0x340e2e(0x97))):(currentInning++,isBottomInning=![])):(isBottomInning=!![],score['top'][currentInning]===undefined&&(score['top'][currentInning]=0x0)),updateDiamondDisplay(),updateScoreboardUI(),updateCountDisplay();}function addScore(_0x2e44aa){const _0x2abb25=_0x2ab971;if(isGameEnded||_0x2e44aa<=0x0)return;!isBottomInning?(score['top'][currentInning]===undefined&&(score[_0x2abb25(0xe5)][currentInning]=0x0),score[_0x2abb25(0xe5)][currentInning]+=_0x2e44aa,totalScore[_0x2abb25(0xe5)]+=_0x2e44aa):(score[_0x2abb25(0xeb)][currentInning]===undefined&&(score[_0x2abb25(0xeb)][currentInning]=0x0),score['bottom'][currentInning]+=_0x2e44aa,totalScore[_0x2abb25(0xeb)]+=_0x2e44aa),updateScoreboardUI();}function getLogSnapshot(){const _0x1d2a0d=_0x2ab971;return{'inning':currentInning,'isBottom':isBottomInning,'team':isBottomInning?document[_0x1d2a0d(0xc7)](_0x1d2a0d(0xb2))[_0x1d2a0d(0xa8)]:document[_0x1d2a0d(0xc7)](_0x1d2a0d(0xd7))['textContent']};}function undo(){const _0x59d25b=_0x2ab971;if(historyStack[_0x59d25b(0xc5)]===0x0)return;const _0x41cedc=historyStack[_0x59d25b(0x8f)]();counts=_0x41cedc[_0x59d25b(0x95)],runners=_0x41cedc[_0x59d25b(0x90)],score=_0x41cedc[_0x59d25b(0x83)],currentInning=_0x41cedc['currentInning'],isBottomInning=_0x41cedc[_0x59d25b(0x9c)],updateCountDisplay(),updateDiamondDisplay(),updateScoreboardUI(),syncPush(_0x59d25b(0xad));}function saveHistory(){const _0x33763b=_0x2ab971;if(historyStack[_0x33763b(0xc5)]>0x14)historyStack['shift']();historyStack[_0x33763b(0xc1)](JSON[_0x33763b(0x80)](JSON[_0x33763b(0x89)]({'counts':counts,'runners':runners,'score':score,'currentInning':currentInning,'isBottomInning':isBottomInning})));}function updateCountDisplay(){const _0x257078=_0x2ab971,_0x879eb3=(_0x1e4a47,_0x4f43aa)=>{const _0x2c7a5c=_0x7ccf,_0x2f137d=document['querySelectorAll']('.dot.'+_0x1e4a47);_0x2f137d[_0x2c7a5c(0xd6)]((_0x129512,_0x19b9e0)=>_0x129512['classList']['toggle'](_0x2c7a5c(0x92),_0x19b9e0<_0x4f43aa));};_0x879eb3('ball',counts[_0x257078(0xae)]),_0x879eb3(_0x257078(0xcb),counts[_0x257078(0xcb)]),_0x879eb3(_0x257078(0xb5),counts['out']);}function updateDiamondDisplay(){const _0x3dffae=_0x2ab971;document['getElementById']('base1')[_0x3dffae(0x9d)][_0x3dffae(0xd1)](_0x3dffae(0xa0),runners['base1']),document['getElementById']('base2')[_0x3dffae(0x9d)]['toggle'](_0x3dffae(0xa0),runners['base2']),document[_0x3dffae(0xc7)]('base3')[_0x3dffae(0x9d)][_0x3dffae(0xd1)](_0x3dffae(0xa0),runners[_0x3dffae(0x76)]);}function _0x7ccf(_0x4e5957,_0x5b693c){_0x4e5957=_0x4e5957-0x68;const _0x38b17e=_0x38b1();let _0x7ccff7=_0x38b17e[_0x4e5957];return _0x7ccff7;}function updateScoreboardUI(){const _0x386d09=_0x2ab971,_0x5c21dc=document[_0x386d09(0xc7)](_0x386d09(0xa2)),_0x589343=document[_0x386d09(0xc7)](_0x386d09(0xdd)),_0x57aafc=document[_0x386d09(0xc7)](_0x386d09(0xcc));if(!_0x5c21dc||!_0x589343||!_0x57aafc){console[_0x386d09(0xd9)](_0x386d09(0x7d),{'headerRow':_0x5c21dc,'topRow':_0x589343,'bottomRow':_0x57aafc});return;}const _0x3c96b6=_0x5d6007=>{const _0x1fb56e=_0x386d09;for(let _0x55c5b3=_0x5d6007[_0x1fb56e(0xc2)]['length']-0x2;_0x55c5b3>=0x1;_0x55c5b3--){_0x5d6007[_0x1fb56e(0x6e)](_0x55c5b3);}};_0x3c96b6(_0x5c21dc),_0x3c96b6(_0x589343),_0x3c96b6(_0x57aafc);const _0x295340=Math[_0x386d09(0xf0)](currentInning,totalInnings);for(let _0x57d9f6=0x1;_0x57d9f6<=_0x295340;_0x57d9f6++){const _0x42bee0=document['createElement']('th');_0x42bee0[_0x386d09(0xa8)]=_0x57d9f6,_0x5c21dc[_0x386d09(0xe6)](_0x42bee0,_0x5c21dc[_0x386d09(0xc2)][_0x5c21dc[_0x386d09(0xc2)][_0x386d09(0xc5)]-0x1]);const _0x43a91e=document[_0x386d09(0x82)]('td');_0x43a91e['textContent']=score[_0x386d09(0xe5)]&&score[_0x386d09(0xe5)][_0x57d9f6]!==undefined?score[_0x386d09(0xe5)][_0x57d9f6]:'-',_0x589343[_0x386d09(0xe6)](_0x43a91e,_0x589343[_0x386d09(0xc2)][_0x589343[_0x386d09(0xc2)][_0x386d09(0xc5)]-0x1]);const _0x4969e9=document[_0x386d09(0x82)]('td');_0x4969e9['textContent']=score[_0x386d09(0xeb)]&&score[_0x386d09(0xeb)][_0x57d9f6]!==undefined?score[_0x386d09(0xeb)][_0x57d9f6]:'-',_0x57aafc[_0x386d09(0xe6)](_0x4969e9,_0x57aafc[_0x386d09(0xc2)][_0x57aafc['cells'][_0x386d09(0xc5)]-0x1]);if(_0x57d9f6===currentInning){if(!isBottomInning)_0x43a91e[_0x386d09(0x9d)][_0x386d09(0xe0)]('active-cell');else _0x4969e9[_0x386d09(0x9d)][_0x386d09(0xe0)](_0x386d09(0xcd));}}const _0xf184e1=document[_0x386d09(0xc7)](_0x386d09(0xc6)),_0x1ac1d8=document[_0x386d09(0xc7)]('total-score-bottom');if(_0xf184e1)_0xf184e1[_0x386d09(0xa8)]=totalScore[_0x386d09(0xe5)];if(_0x1ac1d8)_0x1ac1d8['textContent']=totalScore['bottom'];}async function endGame(){const _0x4cdb52=_0x2ab971;if(!confirm(_0x4cdb52(0x69)))return;isGameEnded=!![];const _0x3e21f5=_0x4cdb52(0x71),_0x58ff8c=document[_0x4cdb52(0xc7)](_0x4cdb52(0x74));if(_0x58ff8c)_0x58ff8c['disabled']=!![];await syncPush(_0x3e21f5),alert(_0x4cdb52(0x88)),updateScoreboardUI(),document['body'][_0x4cdb52(0x9d)][_0x4cdb52(0xe0)](_0x4cdb52(0xce));}function setControlsDisabled(_0x1619f8){const _0x228027=_0x2ab971,_0x118fba=document['querySelectorAll'](_0x228027(0xc9));_0x118fba[_0x228027(0xd6)](_0x218366=>{const _0x4614e0=_0x228027;_0x218366[_0x4614e0(0xc8)]=_0x1619f8,_0x218366[_0x4614e0(0x8a)]['opacity']=_0x1619f8?_0x4614e0(0xe9):_0x4614e0(0xb9),_0x218366[_0x4614e0(0x8a)]['cursor']=_0x1619f8?_0x4614e0(0xaa):_0x4614e0(0xa1);});}async function handleLeagueSelect(){const _0x332859=_0x2ab971,_0x311c1b=document['getElementById']('select-league')[_0x332859(0x6a)],_0x367f99=document[_0x332859(0xc7)](_0x332859(0xd4));if(!_0x311c1b){_0x367f99[_0x332859(0x9d)][_0x332859(0xe0)](_0x332859(0xe2));return;}_0x367f99[_0x332859(0x9d)][_0x332859(0x86)]('hidden'),await fetchExistingGames(_0x311c1b);}async function fetchExistingGames(_0x393afb){const _0x22fc50=_0x2ab971,_0x1c1b2f=document['getElementById'](_0x22fc50(0xf4));_0x1c1b2f[_0x22fc50(0xb4)]=_0x22fc50(0xef);try{const _0xd61fd0=await fetch(GAS_URL+_0x22fc50(0x7b)+_0x393afb),_0x3dd943=await _0xd61fd0[_0x22fc50(0xaf)]();_0x1c1b2f['innerHTML']=_0x22fc50(0x8c);if(_0x3dd943[_0x22fc50(0xc5)]===0x0){_0x1c1b2f['innerHTML']=_0x22fc50(0xa6);return;}_0x3dd943[_0x22fc50(0xd6)](_0x28e098=>{const _0x53389a=_0x22fc50,_0x42ef29=document[_0x53389a(0x82)](_0x53389a(0xe7));_0x42ef29[_0x53389a(0x6a)]=_0x28e098['id'],_0x42ef29[_0x53389a(0xa8)]=_0x28e098[_0x53389a(0x96)]+'\x20('+_0x28e098['id']+')',_0x1c1b2f[_0x53389a(0x7a)](_0x42ef29);});}catch(_0x3601e6){console[_0x22fc50(0xd9)](_0x22fc50(0xee),_0x3601e6),_0x1c1b2f[_0x22fc50(0xb4)]=_0x22fc50(0xa7);}}function showNewGameForm(){const _0x434764=_0x2ab971;document[_0x434764(0xc7)](_0x434764(0xec))[_0x434764(0x9d)][_0x434764(0x86)]('hidden'),document[_0x434764(0xc7)](_0x434764(0xc4))[_0x434764(0x9d)][_0x434764(0xe0)](_0x434764(0xe2)),generateGameId();}function showExistingGameForm(){const _0x2dc0c6=_0x2ab971;document[_0x2dc0c6(0xc7)]('existing-game-form')[_0x2dc0c6(0x9d)][_0x2dc0c6(0x86)](_0x2dc0c6(0xe2)),document[_0x2dc0c6(0xc7)](_0x2dc0c6(0xec))[_0x2dc0c6(0x9d)][_0x2dc0c6(0xe0)]('hidden');}async function resumeGame(){const _0x1dad15=_0x2ab971,_0x181c5a=document[_0x1dad15(0xc7)](_0x1dad15(0xf4))[_0x1dad15(0x6a)];if(!_0x181c5a){alert(_0x1dad15(0xba));return;}try{const _0x1fc1d8=await fetch(GAS_URL+_0x1dad15(0x84)+_0x181c5a),_0xf64933=await _0x1fc1d8[_0x1dad15(0xaf)]();if(!_0xf64933||!_0xf64933[_0x1dad15(0xb1)])throw new Error(_0x1dad15(0x6f));const _0x31ec3f=typeof _0xf64933['state']===_0x1dad15(0xd5)?JSON[_0x1dad15(0x80)](_0xf64933['state']):_0xf64933[_0x1dad15(0xb1)];gameId=_0x181c5a,counts=_0x31ec3f[_0x1dad15(0x95)]||{'ball':0x0,'strike':0x0,'out':0x0},runners=_0x31ec3f['runners']||{'base1':![],'base2':![],'base3':![]},score=_0x31ec3f[_0x1dad15(0x83)]||{'top':0x0,'bottom':0x0},totalScore=_0x31ec3f[_0x1dad15(0xda)]||{'top':0x0,'bottom':0x0},currentInning=_0x31ec3f[_0x1dad15(0xbe)]||0x1,isBottomInning=_0x31ec3f[_0x1dad15(0x9c)]||![],isGameEnded=_0x31ec3f[_0x1dad15(0x78)]||![],totalInnings=_0x31ec3f[_0x1dad15(0x8b)]||0x9,document[_0x1dad15(0xc7)](_0x1dad15(0x68))['textContent']=_0x1dad15(0xb3)+gameId,topTeamName=_0x31ec3f[_0x1dad15(0xb8)]||'先攻',bottomTeamName=_0x31ec3f[_0x1dad15(0xac)]||'後攻',updateCountDisplay(),updateDiamondDisplay(),updateScoreboardUI(),document[_0x1dad15(0xc7)]('display-game-id')[_0x1dad15(0xa8)]=_0x1dad15(0xb3)+gameId,document[_0x1dad15(0xc7)](_0x1dad15(0x93))['classList'][_0x1dad15(0xe0)]('hidden'),document[_0x1dad15(0xc7)](_0x1dad15(0x6b))['classList'][_0x1dad15(0x86)](_0x1dad15(0xe2)),syncPull(),alert(_0x1dad15(0x91));}catch(_0x5ae74a){console['error']('再開エラー:',_0x5ae74a),alert('データの読み込みに失敗しました。');}}function generateGameId(){const _0x54c95b=_0x2ab971,_0x812655=document[_0x54c95b(0xc7)](_0x54c95b(0x6d))['value']||'G',_0x24db49=new Date()[_0x54c95b(0x7c)]()[_0x54c95b(0xf1)](0x2,0xa)[_0x54c95b(0x87)](/-/g,''),_0x253e85=Math[_0x54c95b(0xdb)]()['toString'](0x24)[_0x54c95b(0xd8)](0x2,0x5)[_0x54c95b(0xbc)]();document[_0x54c95b(0xc7)](_0x54c95b(0x70))['value']=_0x812655+'-'+_0x24db49+'-'+_0x253e85;}